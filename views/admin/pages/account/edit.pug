extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
    +alert-success(5000)
    +alert-error(5000)

    .card
        .card-header
            strong Cập nhật thông tin tài khoản

        .card-body
            form(
                action=`${prefixAdmin}/account/edit/${data.id}?_method=PATCH`
                method="POST"
                enctype="multipart/form-data"
            )

                // ===== HỌ TÊN =====
                .form-group.mb-3
                    label(for="fullName") Họ và tên *
                    input.form-control(
                        type="text"
                        id="fullName"
                        name="fullName"
                        required
                        value=data.fullName
                    )

                // ===== EMAIL =====
                .form-group.mb-3
                    label(for="email") Email *
                    input.form-control(
                        type="email"
                        id="email"
                        name="email"
                        required
                        value=data.email
                    )

                // ===== MẬT KHẨU =====
                .form-group.mb-3
                    label(for="password") Mật khẩu (để trống nếu không đổi)
                    input.form-control(
                        type="password"
                        id="password"
                        name="password"
                    )

                // ===== SỐ ĐIỆN THOẠI =====
                .form-group.mb-3
                    label(for="phone") Số điện thoại
                    input.form-control(
                        type="text"
                        id="phone"
                        name="phone"
                        value=data.phone
                    )

                // ===== AVATAR =====
                div(
                    class="mb-3"
                    upload-image
                    )
                    label(class="form-label" for="thumbnail") Ảnh (URL)
                    input(
                        type="file"
                        id="thumbnail"
                        name="avatar"
                        placeholder="https://example.com/image.jpg"
                        class="form-control-file"
                        accept="image/*"
                        upload-image-input
                    )
                    img(
                        class="image-preview"
                        src=data.avatar
                        upload-image-preview
                    )

                // ===== PHÂN QUYỀN =====
                .form-group.mb-3
                    label(for="role_id") Nhóm quyền *
                    select.form-control(
                        id="role_id"
                        name="role_id"
                        required
                    )
                        option(value="") -- Chọn nhóm quyền --
                        each item in roles
                            option(
                                value=item.id
                                selected=(item.id == data.role_id)
                            ) #{item.title}

                // ===== TRẠNG THÁI =====
                .form-group.mb-4
                    label Trạng thái

                    .form-check.form-check-inline
                        input.form-check-input(
                            type="radio"
                            id="statusActive"
                            name="status"
                            value="active"
                            checked=(data.status == 'active')
                        )
                        label.form-check-label(for="statusActive") Hoạt động

                    .form-check.form-check-inline
                        input.form-check-input(
                            type="radio"
                            id="statusInactive"
                            name="status"
                            value="inactive"
                            checked=(data.status == 'inactive')
                        )
                        label.form-check-label(for="statusInactive") Dừng hoạt động

                // ===== SUBMIT =====
                .text-right
                    button.btn.btn-primary(type="submit") Cập nhật
                    a.btn.btn-secondary.ml-2(
                        href=`${prefixAdmin}/account`
                    ) Hủy
